<div>
  <h2>Messages</h2>
  <% if @comments.size == 0 && !@work.submission_notes.present? %>
    No messages
  <% end %>

  <% @comments.each do |activity| %>
    <%= render partial: 'work_activity', locals: {
      activity: activity,
      event_type: activity.event_type
    } %>
  <% end %>
  <% if @work.submission_notes.present? %>
    <div class="activity-history-item activity-history-comment-item">
      <div class="activity-history-comment-title">
        Submission message
      </div>
      <%= @work.submission_notes %>
    </div>
  <% end %>

  <div id="new-comment-section">
    <%= form_with url: add_comment_work_path(@work) do |f| %>
      <textarea id="new-comment" name="new-comment" class="new-comment" placeholder="leave a message" rows="5" cols="100"></textarea>
      <br/>
      <%= f.submit("Message", class: "btn btn-secondary") %>
      <span class="new-comment-help">
        Simple Markdown is accepted, e.g. *italics*, **bold**, # Header 1, ## Header 2, ```code```. Use @netid to refer to others.
      </span>
    <% end %>
  </div>
</div>

<div>
  <h2>Change History</h2>
  <% if @changes.size == 0 %>
    No activity
  <% end %>
  <% @changes.each do |activity| %>
    <%= render partial: 'work_activity', locals: {
      activity: activity,
      event_type: activity.event_type
    } %>
  <% end %>
</div>
